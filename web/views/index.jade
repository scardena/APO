extends layout
block content
	// Content Header (Page header)
	section.content-header
		h1
			| ALMA Monitoring
			small General
		ol.breadcrumb
			li
				a(href='#')
					i.fa.fa-dashboard
					| Home
			li.active Dashboard
	// Main content
	section.content
		.row
			.col-sm-6
				.box.box-solid.box-info
					.box-header
						h2.box-title ASDMs Ingested last 15 days
					.box-body.chart-responsive
						#bar-chart1.chart(style='height: 150px;')
			.col-lg-6
				.box.box-solid.box-info
					.box-header
						h2.box-title Data Ingested last 15 days
					.box-body.chart-responsive
						#bar-chart2.chart(style='height: 150px;')



		.row
			.col-lg-4.col-xs-6
				- var myicon = statusNA
				if myicon == "OK" 
					.small-box.bg-green
						.inner
							h3
								| Backlog NA 
							h2
								| #{backlogNA} Files, #{sizeNA} GB 
						.icon
							i.fa.fa-file-o




				else
					.small-box.bg-red
						.inner
							h3
								| Backlog NA
							h2
								| #{backlogNA} Files, #{sizeNA} GB
						.icon-small
							i.fa.fa-warning





			.col-lg-4.col-xs-6
				- var myicon = statusEU
				if myicon == "OK" 
					.small-box.bg-green
						.inner
							h3
								| Backlog EU
							h2
								| #{backlogEU} Files, #{sizeEU} GB
						.icon
							i.fa.fa-file-o


				else
					.small-box.bg-red
						.inner
							h3
								| Backlog EU
							h2
								| #{backlogEU} Files, #{sizeEU} GB
						.icon
							i.fa.fa-warning



			.col-lg-4.col-xs-6
				- var myicon = statusEA
				if myicon == "OK" 
					.small-box.bg-green
						.inner
							h3
								| Backlog EA
							h2
								| #{backlogEA} Files, #{sizeEA} GB
						.icon
							i.fa.fa-file-o

				else
					.small-box.bg-red
						.inner
							h3
								| Backlog EA
							h2
								| #{backlogEA} Files, #{sizeEA} GB
						.icon
							i.fa.fa-warning


			.col-sm-6
				.box.box-solid.box-info.no-padding
					.box-header
						h3.box-title NGAS Status
					.box-body.no-padding
						.box-body.table-responsive.no-padding
							table.table.table-hover
								tr
									th Service name
									th Status
								tr
									td NGAS SCO
									td
										span.label.label-success OK
								tr
									td NGAS OSF
									td
										span.label.label-success OK		
								tr
									td NGAS OSF TestBench
									td
										span.label.label-success OK	



			.col-sm-6
				.box.box-solid.box-info.no-padding
					.box-header
						h2.box-title NGAS Total load
					.box-body
						.clearfix
							span.pull-left SCO
							- var percentage = Math.round(scoused/scototal*100)
							smal.pull-right #{scoused} / #{scototal} GB (#{percentage}) %
						.progress.xs		
							.progress-bar.progress-bar-aqua(style='width: #{percentage}%')

						.clearfix
							span.pull-left OSF BackEnd
							- var percentage = Math.round(osfBEused/osfBEtotal*100)
							smal.pull-right #{osfBEused} / #{osfBEtotal} GB (#{percentage})%
						.progress.xs		
							.progress-bar.progress-bar-aqua(style='width: #{percentage}%')

						.clearfix
							span.pull-left OSF FrontEnd
							- var percentage = Math.round(osfFEused/osfFEtotal*100)
							smal.pull-right #{osfFEused} / #{osfFEtotal} GB (#{percentage})%
						.progress.xs		
							.progress-bar.progress-bar-aqua(style='width: #{percentage}%')



		.row
			.col-lg-3
				.small-box.bg-aqua
					.inner
						h3
							| #{duplicatefiles} Files
						p
							| Duplicated files SCO
					.icon
						i.fa.fa-file-o
					.a.small-box-footer(href='#')
						| Number of files      
						i.fa.fa-arrow-circle-right
			.col-lg-3
				.small-box.bg-green
					.inner
						h3
							| #{zerobytes} Files
						p
							| Zero Bytes Files
					.icon
						i.fa.fa-file-o
					.a.small-box-footer(href='#')
						| Number of files   
						i.fa.fa-arrow-circle-right

			.col-lg-3
				.small-box.bg-yellow
					.inner
						h3
							| #{archivesize} TB
						p
							| DB SCO Archive Size
					.icon
						i.fa.fa-cube
					.a.small-box-footer(href='index')
						| Number of files    
						i.fa.fa-arrow-circle-right

			.col-lg-3
				.small-box.bg-aqua
					.inner
						h3
							| #{fileinfenotinbe} Files
						p
							| Files in FE not in BE
					.icon
						i.fa.fa-file-o
					.a.small-box-footer(href='index')
						| Number of files    
						i.fa.fa-arrow-circle-right


			.col-lg-6
				.box.box-solid.box-info.no-padding
					.box-header
						h2.box-title Oracle ASM groups
					.box-body
						- var scog3status = scog3statusjs
						if scog3status == "OK"
							.clearfix
								span.pull-left SCO ASM GROUP3
								- var group3scoused = Math.round(group3scototal-group3scofree)
								- var percentage = Math.round(group3scoused/group3scototal*100)
								smal.pull-right #{Math.round(group3scoused)} / #{Math.round(group3scototal)} GB (#{percentage})%
							.progress.xs		
								.progress-bar.progress-bar-aqua(style='width: #{percentage}%')
	
						else if scog3status == "WARNING"	
							.clearfix
								span.pull-left SCO ASM GROUP3
								- var group3scoused = Math.round(group3scototal-group3scofree)
								- var percentage = Math.round(group3scoused/group3scototal*100)
								smal.pull-right #{Math.round(group3scoused)} / #{Math.round(group3scototal)} GB (#{percentage})%
							.progress.xs		
								.progress-bar.progress-bar-warning(style='width: #{percentage}%')
		
						else if scog3status == "CRITICAL"	
							.clearfix
								span.pull-left SCO ASM GROUP3
								- var group3scoused = Math.round(group3scototal-group3scofree)
								- var percentage = Math.round(group3scoused/group3scototal*100)
								smal.pull-right #{Math.round(group3scoused)} / #{Math.round(group3scototal)} GB (#{percentage})%
							.progress.xs		
								.progress-bar.progress-bar-danger(style='width: #{percentage}%')


	
						- var scog6status = scog6statusjs
						if scog6status == "OK"
							.clearfix
								span.pull-left SCO ASM GROUP6
								- var group6scoused = Math.round(group6scototal-group6scofree)
								- var percentage = Math.round(group6scoused/group6scototal*100)
								smal.pull-right #{Math.round(group6scoused)} / #{Math.round(group6scototal)} GB (#{percentage})%
							.progress.xs		
								.progress-bar.progress-bar-aqua(style='width: #{percentage}%')
	
						else if scog6status == "WARNING"
							.clearfix
								span.pull-left SCO ASM GROUP6
								- var group6scoused = Math.round(group6scototal-group6scofree)
								- var percentage = Math.round(group6scoused/group6scototal*100)
								smal.pull-right #{Math.round(group6scoused)} / #{Math.round(group6scototal)} GB (#{percentage})%
							.progress.xs		
								.progress-bar.progress-bar-warning(style='width: #{percentage}%')
	
						else if scog6status == "CRITICAL"
							.clearfix
								span.pull-left SCO ASM GROUP6
								- var group6scoused = Math.round(group6scototal-group6scofree)
								- var percentage = Math.round(group6scoused/group6scototal*100)
								smal.pull-right #{Math.round(group6scoused)} / #{Math.round(group6scototal)} GB (#{percentage})%
							.progress.xs		
								.progress-bar.progress-bar-danger(style='width: #{percentage}%')
	


						- var osfg3status = osfg3statusjs					
						if osfg3status == "OK"
							.clearfix
								span.pull-left OSF ASM GROUP3
								- var group3osfused = Math.round(group3osftotal-group3osffree)
								- var percentage = Math.round(group3osfused/group3osftotal*100)
								smal.pull-right #{Math.round(group3osfused)} / #{Math.round(group3osftotal)} gb (#{percentage})%
							.progress.xs		
								.progress-bar.progress-bar-aqua(style='width: #{percentage}%')

						if osfg3status == "WARNING"
							.clearfix
								span.pull-left OSF ASM GROUP3
								- var group3osfused = Math.round(group3osftotal-group3osffree)
								- var percentage = Math.round(group3osfused/group3osftotal*100)
								smal.pull-right #{Math.round(group3osfused)} / #{Math.round(group3osftotal)} gb (#{percentage})%
							.progress.xs		
								.progress-bar.progress-bar-danger(style='width: #{percentage}%')
	
						if osfg3status == "CRITICAL"	
							.clearfix
								span.pull-left OSF ASM GROUP3
								- var group3osfused = Math.round(group3osftotal-group3osffree)
								- var percentage = Math.round(group3osfused/group3osftotal*100)
								smal.pull-right #{Math.round(group3osfused)} / #{Math.round(group3osftotal)} gb (#{percentage})%
							.progress.xs		
								.progress-bar.progress-bar-danger(style='width: #{percentage}%')



						- var osfg6status = osfg6statusjs
						if osfg6status == "OK"
							.clearfix
								span.pull-left OSF ASM GROUP6
								- var group6osfused = Math.round(group6osftotal-group6osffree)
								- var percentage = Math.round(group6osfused/group6osftotal*100)
								smal.pull-right #{Math.round(group6osfused)} / #{Math.round(group6osftotal)} GB (#{percentage})%
							.progress.xs		
								.progress-bar.progress-bar-aqua(style='width: #{percentage}%')
					
						if osfg6status == "WARNING"
							.clearfix
								span.pull-left OSF ASM GROUP6
								- var group6osfused = Math.round(group6osftotal-group6osffree)
								- var percentage = Math.round(group6osfused/group6osftotal*100)
								smal.pull-right #{Math.round(group6osfused)} / #{Math.round(group6osftotal)} GB (#{percentage})%
							.progress.xs		
								.progress-bar.progress-bar-warning(style='width: #{percentage}%')
					
	
						if osfg6status == "CRITICAL"
							.clearfix
								span.pull-left OSF ASM GROUP6
								- var group6osfused = Math.round(group6osftotal-group6osffree)
								- var percentage = Math.round(group6osfused/group6osftotal*100)
								smal.pull-right #{Math.round(group6osfused)} / #{Math.round(group6osftotal)} GB (#{percentage})%
							.progress.xs		
								.progress-bar.progress-bar-danger(style='width: #{percentage}%')
					
	

			.col-sm-6
				.box.box-solid.box-info.no-padding
					.box-header
						h3.box-title TableSpace XMLSTORE Load (Not Allocated space included)
					.box-body
						- var scostatus = xmlscostatus
						if scostatus == "OK"

							.clearfix
								span.pull-left XMLSTORE SCO, #{xmlscofree} GiB Free
								- var percentage = Math.round(xmlscoused/xmlscototal*100)
								smal.pull-right #{xmlscoused} / #{xmlscototal} GiB (#{percentage})% 
							.progress.xs		
								.progress-bar.progress-bar-aqua(style='width: #{percentage}%')
						else if scostatus == "WARNING"	

							.clearfix
								span.pull-left XMLSTORE SCO, #{xmlscofree} GiB Free
								- var percentage = Math.round(xmlscoused/xmlscototal*100)
								smal.pull-right #{xmlscoused} / #{xmlscototal} GiB (#{percentage})% 
							.progress.xs		
								.progress-bar.progress-bar-yellow(style='width: #{percentage}%')

						else if scostatus == "CRITICAL"	

							.clearfix
								span.pull-left XMLSTORE SCO, #{xmlscofree} GiB Free
								- var percentage = Math.round(xmlscoused/xmlscototal*100)
								smal.pull-right #{xmlscoused} / #{xmlscototal} GiB (#{percentage})% 
							.progress.xs		
								.progress-bar.progress-bar-danger(style='width: #{percentage}%')





						- var osfstatus = xmlosfstatus
						if xmlosfstatus == "OK" 
							.clearfix
								span.pull-left XMLSTORE OSF, #{xmlosffree} GiB Free
								- var percentage = Math.round(xmlosfused/xmlosftotal*100)
								smal.pull-right #{xmlosfused} / #{xmlosftotal} GiB (#{percentage})% 

							.progress.xs		
								.progress-bar.progress-bar-aqua(style='width: #{percentage}%')
					
						else if xmlosfstatus == "WARNING"
							.clearfix
								span.pull-left XMLSTORE OSF, #{xmlosffree} GiB Free
								- var percentage = Math.round(xmlosfused/xmlosftotal*100)
								smal.pull-right #{xmlosfused} / #{xmlosftotal} GiB (#{percentage})% 

							.progress.xs		
								.progress-bar.progress-bar-yellow(style='width: #{percentage}%')
	
						else if xmlosfstatus == "CRITICAL"
							.clearfix
								span.pull-left XMLSTORE OSF, #{xmlosffree} GiB Free
								- var percentage = Math.round(xmlosfused/xmlosftotal*100)
								smal.pull-right #{xmlosfused} / #{xmlosftotal} GiB (#{percentage})% 

							.progress.xs		
								.progress-bar.progress-bar-danger(style='width: #{percentage}%')
					



		//.row
		//	.box.box-danger
		//		.box-header
		//			h3.box-title ARCS Link State
		//		.box-body.no-padding
		//			.row
		//				.col-sm-12
		//					.pad
		//						.clearfix
		//							span.pull-left NRAO, ESO, NAOJ
		//						#chartContainer A chart will render here
									


block javascript
	// add new calendar event modal
	// jQuery 2.0.2
	script(src='/js/libs/jquery.min.js')
	// jQuery UI 1.10.3
	script(src='/js/jquery-ui-1.10.3.min.js', type='text/javascript')
	// Bootstrap
	script(src='/js/bootstrap.min.js', type='text/javascript')
	// Morris.js charts
	script(src='/js/libs/raphael-min.js')
	script(src='/js/plugins/morris/morris.min.js', type='text/javascript')
	// Sparkline
	script(src='/js/plugins/sparkline/jquery.sparkline.min.js', type='text/javascript')
	// jvectormap
	script(src='/js/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js', type='text/javascript')
	script(src='/js/plugins/jvectormap/jquery-jvectormap-world-mill-en.js', type='text/javascript')
	// fullCalendar
	script(src='/js/plugins/fullcalendar/fullcalendar.min.js', type='text/javascript')
	// jQuery Knob Chart
	script(src='/js/plugins/jqueryKnob/jquery.knob.js', type='text/javascript')
	// fusionmaps
	script(src='/js/plugins/fusioncharts/fusioncharts.js',type='text/javascript')
	script(src='/js/plugins/fusioncharts/fusioncharts.maps.js',type='text/javascript')
	script(src='/js/plugins/fusioncharts/themes/fusioncharts.theme.fint.js',type='text/javascript')




	// Bootstrap WYSIHTML5
	script(src='/js/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js', type='text/javascript')
	// iCheck
	script(src='/js/plugins/iCheck/icheck.min.js', type='text/javascript')
	// AdminLTE App
	script(src='/js/AdminLTE/app.js', type='text/javascript')
	// AdminLTE dashboard demo (This is only for demo purposes)
	script(src='/js/AdminLTE/dashboard.js', type='text/javascript')
	// AdminLTE for demo purposes
	script(src='/js/AdminLTE/demo.js', type='text/javascript')

	script.

		Morris.Bar({
			element: 'bar-chart1',
			data: !{JSON.stringify(chart1)},
			xkey: 'x',
			ykeys: ['ytar','yscience'],
			labels: ['TAR','Science'],
			stacked: 'true',
			hideHover: 'auto',
			barColors: ["#f56954", "#00a65a"]
		});


		Morris.Bar({
			element: 'bar-chart2',
			data: !{JSON.stringify(chart2)},
			xkey: 'x',
			ykeys: ['ycsv','yscience'],
			labels: ['CSV','Science'],
			stacked: 'true',
			hideHover: 'auto',
			barColors: ["#f56954", "#00a65a"]

		});


		FusionCharts.ready(function(){
			var salesByState = new FusionCharts({
			"type": "maps/chile",
			"renderAt": "chartChile",
			"width": "800",
			"height": "600",
			"dataFormat": "json"
			});
		salesByState.render();
		});
	

		FusionCharts.ready(function(){
			var salesByState = new FusionCharts({
			"type": "maps/world",
			"renderAt": "chartContainer",
			"width": "800",
			"height": "600",
			"dataFormat": "json",
			"dataSource": {
			"chart": {
				"caption": "ARCS Map",
				"subcaption": "Link State",
				"showCanvasBorder" : "1",
				"bgImageAlpha" : "100",
				//"entityFillHoverColor": "#fffff",
				//"numberScaleValue": "1,1000,1000",
				//"numberScaleUnit": "K,M,B",
				"markerBgColor": "FF0000",
				"markerRadius": "10",
				"viewMode" : "0",
				"showMarkerLabels": "1",
				//"numberPrefix": "$",
				//"showLabels": "1",
				"theme": "zune"
			},


				"markers": {
					"items": [
					{
						"id": "eso",
						"shapeid": "hdo-shape",
						"x": "430.23",
						"y": "125.9",
						"label": "ESO",
						"tooltext": "European Southern Observatory",
						"labelpos": "top"
					},
					{
						"id": "naoj",
						"shapeid": "hdo-shape",
						"x": "630.23",
						"y": "170.9",
						"label": "NAOJ",
						"tooltext": "National Astronomical Observatory of Japan",
						"labelpos": "bottom"
					},
					{
						"id": "nrao",
						"shapeid": "hdo-shape",
						"x": "180.23",
						"y": "150.9",
						"label": "NRAO",
						"tooltext": "National Radio Astronomy Observatory",
						"labelpos": "top"
					},
					{
						"strength": "3",
						"id": "sco",
						"shapeid": "hdo-shape",
						"x": "180.23",
						"y": "350.9",
						"label": "OSF",
						"tooltext": "Santiago Central Office",
						"labelpos": "top"
					}],
	



					"connectors": [
					{
						
						"from": "sco",
						"to": "nrao",
						"tooltext": "ping: 138 ms",
						"dashed": "0",
						"strength" : "10",
						"thickness" : "10",
						"color": "00577F",
						"alpha": "60",
						"showHoverEffect" : "0",
						"hoverThickness" : "50"
					},
					{
						"from": "sco",
						"to": "naoj",
						"tooltext": "ping: 256 ms",
						"dashed": "0",
						"showHoverEffect" : "0",
						"thickness" : "10",
						"color": "00577F",
						"alpha": "60"
					},		
					{
						"from": "sco",
						"to": "eso",
						"tooltext": "ping arcdb2.hq.eso.org: 246 ms <br> ping ora04.hq.eso.org = 274",
						"dashed": "0",
						"thickness" : "10",
						"color": "00577F",
						"alpha": "60",
						"showHoverEffect" : "0"
					}
				
					],
						
					"shapes": [
					{
						"id": "hdo-shape",
						"type": "circle",
						"radius": "10",                        
						"fillcolor": "ffffff,6baa01",
						"fillAlpha": "100,40",
						"fillRatio": "10,50",
						"fillPattern": "RADIAL",
						"borderColor": "#666666",
						"borderThickness": "3",
						"borderAlpha": "80"
					}
					]
					},

				"data": [
				{
				"id": "NA"
				},
				{
				"id": "EU"
				}
			]
			}
			})
			salesByState.render()
		})	
